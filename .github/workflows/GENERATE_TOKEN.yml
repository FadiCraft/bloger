name: ðŸŽ« Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Token

on: workflow_dispatch

jobs:
  token:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
      
      - name: Install libs
        run: pip install google-auth-oauthlib
      
      - name: Create client_secret.json
        env:
          CLIENT_SECRET_JSON: ${{ secrets.CLIENT_SECRET_JSON }}
        run: |
          echo "$CLIENT_SECRET_JSON" > client.json
          echo "File created"
      
      - name: Generate Token
        run: |
          python3 -c "
from google_auth_oauthlib.flow import InstalledAppFlow
import pickle, base64

SCOPES = ['https://www.googleapis.com/auth/blogger']

flow = InstalledAppFlow.from_client_secrets_file('client.json', SCOPES)
creds = flow.run_local_server(port=0)

token = base64.b64encode(pickle.dumps(creds)).decode()
print('TOKEN_START')
print(token)
print('TOKEN_END')
"
